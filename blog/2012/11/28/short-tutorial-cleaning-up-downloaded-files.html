<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv='X-UA-Compatible' content='IE=edge;chrome=1' />
    <title>Jeri Wieringa - Short Tutorial: Cleaning up downloaded files</title>
    <link rel="alternate" type="application/atom+xml" title="Atom Feed" href="/blog/feed.xml" />
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <link href="/assets/stylesheets/style.css" media="screen" rel="stylesheet" type="text/css" />
    <link href='http://fonts.googleapis.com/css?family=Great+Vibes|Open+Sans:300italic,400italic,400,700' rel='stylesheet' type='text/css'>  
    <link href='http://fonts.googleapis.com/css?family=Forum' rel='stylesheet' type='text/css'>
    <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script>
        $(document).ready(function(){
            $(".nav-button").click(function () {
            $(".nav-button,.primary-nav").toggleClass("open");
            });    
        });
    </script>

  </head>  <body>
   <div id="wrap">
      <header id="image">
        <button class="nav-button">Toggle Navigation</button>
<nav class="primary-nav">
  <ul>
    <li><a href="/blog/">Blog</a></li>
    <li><a href="/portfolio.html">Portfolio</a></li>
    <li><a href="/about.html">About</a></li>
    <li><a href="/cv.html">Vita</a></li>
  </ul>
</nav>
<div id="title">
  <h1><a href="/">Jeri E. Wieringa</a></h1>
</div>

      </header>
      <div id="main" role="main">
          <article>
      <h1>
          Short Tutorial: Cleaning up downloaded files
      </h1>
      <p class="tagline">
          By Jeri Elizabeth Wieringa - <time>Nov 28 2012</time>
      </p>
      <div class="text fulltext">
          <!-- content inserted here -->
          <p>So you used wget or Python to pull down a collection of files from the web. Excellent! But in looking through your loot, you notice that a number of the files are oddly small and, on further examination, find that they are functionally empty. How do you clean up your collection of files quickly?</p>

<p>There are a number of very powerful command line tools built into UNIX systems (Mac and Linux) that allow you to manipulate your files quickly and easily. This is a brief tutorial on how to use those tools to locate all of the files that are too small and then remove those files from your collection.</p>

<p>Begin by navigating in Terminal to your collection of folders. For example, my files were located a couple of folders downs within my Documents folder.</p>

<pre>cd Documents/Github/Clio3/Webscraping/hymn-files</pre>

<p>Once in the folder with your downloaded files, you need to find a way to isolate out the files that are too small to be interesting. To do this, use the “find” command.</p>

<p>If the files we are interested in sorting through are all one file type (in my case they’re .json files), we can tell the computer to find all of the files of a particular type and particular size as follows:</p>

<pre>find *.json -size 28c</pre>

<p>This would find all of the json files that are 28 bytes in size.</p>

<p>However, we want all the files that are 28 bytes or less.</p>

<pre>find *.json -size -28c</pre>

<p>This is important in my case because the files are not truly empty. There is a simple way to identify truly empty files, if that is more appropriate for your data.</p>

<pre>find *.json -empty</pre>

<p>You can also add</p>

<pre>-maxdepth 1</pre>

<p>if there are additional folders that you do not want to work through.</p>

<p>Finding the files is great, but now we need to do something with that collection of files.</p>

<p>There are two ways you can do this. First, you can simply add a delete option to your command, as follows</p>

<pre>find *.json -size -28c -delete</pre>

<table>
  <tbody>
    <tr>
      <td>In general, this should work. However, if you are dealing with a large number of files, it is often better to use a pipe (“</td>
      <td>”). The pipe takes the results of the first command and feeds them to the second command. In the example below, we are taking the results of the find command and passing them to the remove command (“rm”).</td>
    </tr>
  </tbody>
</table>

<pre>find *.json -size -28c | xargs rm</pre>

<p>You will notice that we included “xargs” on the right side of the pipe. Xargs helps the computer handle a long list of file names.</p>

<p>Note: The Wikipedia entry on xargs suggests using “-0″ (zero) when dealing with file names with spaces in them as xargs defaults to separating at white space (another reason to avoid spaces in filenames). If you run this command without -0 and it doesn’t work, try adding the -0.</p>

<p>And the command we are running on each filename is “rm” or remove. rm has a number of options that you can research, some of which really make data un-recoverable and should be used with care. However, a basic “rm” command will be sufficient for this example.</p>

<p>Run this command to remove all of the files less than 28 bytes from your current directory.</p>

<p>(I used 28 bytes because the computer was having trouble with 0 and all of the files I wanted to keep were larger than 28 bytes. Not exactly sure why 0 was a problem but this is why experimenting with the find options before moving on to removing the files is a good idea!)</p>
  
      </div>
  </article>

      </div>
      <aside>
        <div id="sidebar">
  <h2>Scholarship Areas</h2>
  <ul>
      <li class="important"><a href="/research.html">Religious History</a></li>
      <li class="important"><a href="/digital.html">Digital History</a></li>
      <li class="important"><a href="/teaching.html">Teaching</a></li>
  </ul>
  <h2>Recent Posts</h2>
  <ul>
  
    <li><a href="/blog/2014/03/12/Moving-to-Middleman.html">Moving to Middleman</a>, <span>Mar 12</span></li>
  
    <li><a href="/blog/2013/07/30/bringing-rails-girls-to-the-digital-humanities.html">Bringing Rails Girls to the Digital Humanities</a>, <span>Jul 30</span></li>
  
    <li><a href="/blog/2013/03/15/intro-to-rails-girls-for-hastac-2013-draft.html">Intro to Rails Girls for HASTAC 2013</a>, <span>Mar 15</span></li>
  
  </ul>

  <h2>Posts by Category</h2>
  <ul>
    
      <li><a href="/blog/category/research.html">research (26)</a></li>
    
      <li><a href="/blog/category/digital.html">digital (45)</a></li>
    
      <li><a href="/blog/category/coursework.html">coursework (61)</a></li>
    
      <li><a href="/blog/category/teaching.html">teaching (3)</a></li>
    
  </ul>
</div>

      </aside>
      <footer>
        <div id="copyright">
  <p>CC-BY Jeri Wieringa, 2014
  <br/>Image of the Battle Creek Sanitarium circa 1868, from the <a href="http://photo.egwwritings.org/index.php?q=aHR0cDovL25hcy5lZ3d3cml0aW5ncy5vcmcvZ2FsbGVyaWVzL0luc3RpdHV0aW9ucy8xMTkuanBnLnBocA%3D%3D">Ellen White Estate Archives</a>.</p>
</div>
<div id="social" class="nav">
  <ul>
    <li><a href="http://twitter.com/jeriwieringa"><i class="fa fa-twitter"></i></a></li>
    <li><a href="https://github.com/jerielizabeth"><i class="fa fa-github"></i></a></li>
    <li><a href="/blog/feed.xml"><i class="fa fa-rss"></i></a></li>
  </ul>
</div>

<!--<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-35130770-1', 'jeriwieringa.com');
  ga('send', 'pageview');

</script> -->
      </footer>
    </div>
  </body>
</html>
